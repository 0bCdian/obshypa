name: Get card prices

on: workflow_dispatch
  # TO-DO Add the schedule once the workflow's body is complete
  # schedule:
  # - cron: "0 5 * * *"

jobs:
  UpdatePrices:
    name: Update card prices
    runs-on: ubuntu-22.04
    steps:
      - name: Get latest executable
        uses: actions/download-artifact@v4
        with:
          name: api_data_ingestor
          path: api_data_ingestor
          github-token: ${{ github.token }}
          # TO-DO: We need to set the run_id of the workflow that has the api_data_ingestor artifact.
          # Ideally, it should be the latest execution of the 'Build cmd project' workflow.
          # We can get its run_id by storing it in a repository variable on that workflow and accesing it on this one.
      
      - name: Execute executable
        run: ./api_data_ingestor '√Ålbum Season of Weaving.csv' # TO-DO: Do we need to download the .csv as well?
        
      - name: Store card prices
        uses: actions/upload-artifact@v4
        with:
          name: Precio de cartas.json
          path: Precio de cartas.json
